<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Secret Love Letter</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’Œ</text></svg>"
    />
    <link rel="stylesheet" href="./assets/css/styles.css" />
  </head>
  <body>
    <div class="bg-wrapper">
      <div class="wrapper">
        <div class="passcode-screen">
          <h2>How Many Kisses I've Given You? ðŸ’‹</h2>
          <input
            type="number"
            id="passcode"
            placeholder="Enter number..."
            min="0"
            autocomplete="off"
          />
          <div class="error-container">
            <span id="error-msg"></span>
          </div>
          <button id="submit-btn">moah</button>
        </div>

        <div class="content">
          <div class="envelope-wrapper">
            <div class="envelope">
              <div class="envelope-flap"></div>
              <div class="heart"></div>
              <div class="letter">
                <button class="close-btn">âœ•</button>
                <div class="text" id="letter-content">
                  <!-- Letter content will be loaded from encrypted config -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="copyright">
      Made by
      <a href="https://github.com/blind3d3vil" target="_blank">Dropkiler</a>
    </div>

    <!-- Encryption helpers -->
    <script>
      // Encryption key (must match the one used to encrypt)
      const ENCRYPTION_KEY = "YourSecretKey123";

      // Decryption functions
      function decrypt(encoded) {
        try {
          const text = atob(encoded); // Convert from base64
          let result = "";
          for (let i = 0; i < text.length; i++) {
            const charCode =
              text.charCodeAt(i) ^
              ENCRYPTION_KEY.charCodeAt(i % ENCRYPTION_KEY.length);
            result += String.fromCharCode(charCode);
          }
          return result;
        } catch (e) {
          console.error("Decryption failed:", e);
          return "";
        }
      }

      function decryptObject(encoded) {
        try {
          return JSON.parse(decrypt(encoded));
        } catch (e) {
          console.error("Object decryption failed:", e);
          return null;
        }
      }
    </script>

    <!-- Encrypted config -->
    <script>
      // This is your encrypted configuration
      const encryptedConfig =
        "Ik0FEyAWAB0BEWlfAhNEUjUaEFBpVlNCVVhpFRVQUVYxABkWNhdBSEcxJREcQxJdLAIXFyFLTVxHWGkAC0NdQRQKBgEyAgZQX1YFBFlwWh95OAcdPQJDHBAZKQALEXNJMBUUH/Crq45BD0lWJwANRVdBe1UOUCcMFx4AVnFHNEgSfzYZEF5xSUECBAYqAgtQQlsqTU8pcTELFxcRawQLVBJVPAoZGz0CEFIMGmsREVhBEy4ABx43RRcaBABrEhZDVkB5DBQcdBFDEQoaPwQQXx4TPAIaBjoKDQFFACQKWUdTQC1PEx0hRQIcHFQ4ABdFV106ClUGPEULHQkQZUU7REYTMAlVO3MGDAcJEGsRC0jigKZaP088UjAKFh4BVCwMD1QSVi8KG1IyRQQeDBk7FhwRXVV5GB0TJ0UaHRBUJgAYXxJHNk8YF+KBhwwXUhIbPgkdEVBWeRsdGyBfQysKAWsEC1QSXiBPHRcyFxdeRRkyRQ5QQF4tB1lSPhxDFAoGLhMcQxwRdU05HSUMDRVFDSQQWVhBXX4bVQE8CAYGDR0lAll4ElAxABoBNuKBsQoGQgdrFhZcV0cxBhsVcxELExFUIRAKRRJaKkFVMyBFDRMRATkEFRFTQHkNBxcyEQsbCxNnRRhCElA8HQETOgtDExZUPw0cEUFGN08HGyAMDRVFESoGERFfXCsBHBw0S0M7EVQvChxCXBQtTxcXNAwNUgQaL0UcX1YTLgYBGnMRCxdFECocCgoSWi1PER02Fg1VEVQvAAlUXFd5ABtSJwwOF0lULwwKRVNdOgpZUjwXQxEMBigQFEJGUjcMEAF9RSoGRR4+Fg0RV0swHAEB4oGHBgwcFgAqCw0dEkY3HB0TOAANXkUdJQMQX1tHPEFXXnE8DAdFFTkAWUVaVnkJEBc/DA0VRRstRRFeX1Z1TxsdcwgCBhEROUUOWVdBPE88UiARAhwBWms8FkQSUisKVQY7AEMDEB0uEVlYXBM0FlUROwQMAUlUPw0cEV5aPgcBUjoLQx8cVC8EC1pXQC1PGB0+AA0GFlprPBZEElIrClUGOwBDAgAGOAoXEXsUPU8TGz0BQxsLVC4THENLEzUGExcnDA4XSVQiC1lURFYrFlUFPBcPFklUJQpZXFNHLQoHUjsKFFIIFSUcWUVbXjwcVTtzDQIWRQAkRQpUU0E6B1tQf0ciHAFUIgNZVERWK08UUjcEGlIGGyYAChFFWzwBVQs8EEMUCgYsAA0RWEYqG1UaPBJDFgAROwkAEUtcLE8UADZFDx0TES9JWUNXXjwCFxchRRcaDAfigZ8REVRAVnkGBlI9ChdSBFQ4DBdWXlZ5GRAAIAwMHEUbLUUUSBJfMAkQUiQNBgAAVDIKDBFTQTxPGx0nRQYEAAYyERFYXFR3TShecRYKFQsVPxALVBAJIk0BFysRQUhHPWspFkdXEwAAAFIaC0M3ExE5HFlkXFovCgcBNklBXkcaKggcEwgRGAMcADYfAlAYCTY=";

      // Setup the config
      const config = decryptObject(encryptedConfig) || {
        passcode: {
          value: 0,
          placeholder: "Enter number...",
          errorMessage: "Try again!",
        },
        letter: {
          title: "",
          paragraphs: [""],
          signature: { text: "", name: "" },
        },
      };

      // Make config globally available
      window.config = config;

      // Define getConfig function
      window.getConfig = function () {
        try {
          return JSON.parse(JSON.stringify(config));
        } catch (error) {
          console.error("Error in getConfig:", error);
          return {
            passcode: {
              value: 0,
              placeholder: "Enter number...",
              errorMessage: "Try again!",
            },
            letter: {
              title: "",
              paragraphs: [""],
              signature: { text: "", name: "" },
            },
          };
        }
      };
    </script>

    <!-- Load main script -->
    <script src="./js/script.js"></script>
  </body>
</html>
