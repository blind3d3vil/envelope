<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Secret Love Letter</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’Œ</text></svg>"
    />
    <link rel="stylesheet" href="./assets/css/styles.css" />
  </head>
  <body>
    <div class="bg-wrapper">
      <div class="wrapper">
        <div class="passcode-screen">
          <h2>How Many Kisses I've Given You? ðŸ’‹</h2>
          <input
            type="number"
            id="passcode"
            placeholder="Enter number..."
            min="0"
            autocomplete="off"
          />
          <div class="error-container">
            <span id="error-msg"></span>
          </div>
          <button id="submit-btn">moah</button>
        </div>

        <div class="content">
          <div class="envelope-wrapper">
            <div class="envelope">
              <div class="envelope-flap"></div>
              <div class="heart"></div>
              <div class="letter">
                <button class="close-btn">âœ•</button>
                <div class="text" id="letter-content"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="copyright">
      Made by
      <a href="https://github.com/blind3d3vil" target="_blank">Dropkiler</a>
    </div>

    <script>
      // Simple XOR encryption
      const ENCRYPTION_KEY = "love-letter-key-2024";

      function encrypt(text) {
        let result = "";
        for (let i = 0; i < text.length; i++) {
          const charCode =
            text.charCodeAt(i) ^
            ENCRYPTION_KEY.charCodeAt(i % ENCRYPTION_KEY.length);
          result += String.fromCharCode(charCode);
        }
        return btoa(result);
      }

      function decrypt(encoded) {
        try {
          const text = atob(encoded);
          let result = "";
          for (let i = 0; i < text.length; i++) {
            const charCode =
              text.charCodeAt(i) ^
              ENCRYPTION_KEY.charCodeAt(i % ENCRYPTION_KEY.length);
            result += String.fromCharCode(charCode);
          }
          return result;
        } catch (e) {
          console.error("Decryption failed:", e);
          return "";
        }
      }

      // Your encrypted configuration
      const encryptedConfig =
        "F00GBF4fBhsQAFAXEEcPTF5FVxZWXEZVHUBHBBgEEUgDChVJV0IQDk4qGBFIHkUaAQgQSBlLVwMQHBBRHh0ZF2AJFgcVAhcPUUc3TBJxWhhMOAQKQwtFGgEIEEgZRThXW0pTWfCkm4RUGAFOCREAERdfSV8CD0ZZRlgJTUxHYBVFOBsTFwFJSVtdU0JTUx4OBg1eTl8vVjEaSBkAWUxAVRJSCQoaDEMLFlQdC1JZAwwKDUVfQFgITwINTBhFAxsXFl5LBhhDFUQSVwMBAgREAklUEQgdWQIKF14SRF1bTBkXFllMAxsGRRNDEkUKSFxEV1oPClYRQkwNGxgBXA0pEA0NW1YSfUwMGRBBCEUABhzigaZEDUUwDVFfR1gITxEMWwlFEQIAHA0KRR5BW11CRwlPGQMNGw0VAEULQh5FFEhTXhJAA08bAOKAuQURVAMKB0EPRRtIEkRaXR9VVjxCGUUVBgBSQBJFEUhTQkYYTAIPRVoNFxkADV4NBhxZS11CV0IJHVhHAU4pGwIMHEpLHBZYEllBWksbVhZCAQAAHAwcSkssWU5aX11HCeKBux8RCh9FBxsIF1kDDBdKEkRaVRhPHBBeGEUdB0tSbBhFF0xGRUBVAE8XFg0OFxEVERpEBQJVDVNDElcJHQIERAJFFQdFBkUORQpYXBBAXR8GGAINCQQXHEUfQhkLEENVHhJ9GE8SCkgfC1MARRBIDAwXDVNeVhQJARJFWgURHFQRGkhLARhUQQsSXRhPEgpIHwtTAEUWSBsAF0kSX1wUGAYbAAFMAR0HERNDCABVDV1CElcFHRUQQB8RFRoGF15FRTBZElpHRxhPEx1EHxEH4oGgBh1DGBEYQ0YcEkECHB4ERgkLWFQMHEsCCxBZVx4QGE42GRANDRcRVBEaSEsDHEheWVxTTAAQRUUDCBFYRRxCSwgYWUZVQBQbBxMXSEwsVAcRE0MPS1l0XUUSVR4KVhFFCUUFAQwXWUsMFw1fSRJXBA4ZFgFMERwRRR5EDA0NDVteElkVTxIEXwcABwBFH0IGABdZQR4SbQMaVgRfCUUAHABSXQ4XCkJcEHsTCE8QDEMIRR0aRRdbDhcADV5ZVFEYBhsAAUwMGlQABEgZHFlaXUJeUEBPGAoNAQQAAAAADQMKDg1fUVxNTBsfCEgfRT1UDRNJSxEWDUFVU0YPB1hHAU4kGhBFG0tLAA9IQBBTFAgOD0VOAwgRB0UFRQ4LWVRdRRJSAx0RAFlMDwEHEVJFBBJZSVdVQlgVTw8KWEwEBhFFHkIdAB0BEkJXWQkCFABfTBEcHRbigaZZAwALSBJZQRQCAAJFTEwWHRoCHkhLExxfQVldWkwAEEVAFUUYHQMXDRwNHF9XEEtbGU8XF0hMCxsARRdbDhcAWVpZXFNCTStJDx8MExoEBlgZAFsXSRJGURQbVF8PJUU4GxMXDTIKDA17XhJxGgoEHA05Cx0CAABeDklbARBeU1kJTUxHbAAMBhEfEw8WGAQ=";

      // Decrypt and parse the config
      let config;
      try {
        const decrypted = decrypt(encryptedConfig);
        config = JSON.parse(decrypted);
      } catch (e) {
        console.error("Failed to decrypt config:", e);
        config = {
          passcode: {
            value: 0,
            placeholder: "Enter number...",
            errorMessage: "Try again!",
          },
          letter: {
            title: "",
            paragraphs: [""],
            signature: { text: "", name: "" },
          },
        };
      }

      // Make config globally available
      window.config = config;

      // Define getConfig function
      window.getConfig = function () {
        try {
          return JSON.parse(JSON.stringify(config));
        } catch (error) {
          console.error("Error in getConfig:", error);
          return {
            passcode: {
              value: 0,
              placeholder: "Enter number...",
              errorMessage: "Try again!",
            },
            letter: {
              title: "",
              paragraphs: [""],
              signature: { text: "", name: "" },
            },
          };
        }
      };
    </script>

    <script src="./js/script.js"></script>
  </body>
</html>
